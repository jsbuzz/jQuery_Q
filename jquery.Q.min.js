/*! jQuery.Q.js - v1.1 - 2014-03-12
* https://github.com/jsbuzz/jQuery_Q
* Copyright (c) 2014 Matyas Buczko; Licensed GPL2 */
!function(e){"use strict";function n(e){return(typeof e.done+typeof e.fail+typeof e.state).match(/(function){3}/)}e.Q=!0,e.Q=function(r){var t=Array.prototype.slice.call(arguments,1);if("string"==typeof r)r=e.Q[r];else if(n(r))return r;return function(){return r.apply(r,t)}},e.Q.use=function(r){var t=Array.prototype.slice.call(arguments,1),o=!1;if("string"==typeof r)r=e.Q[r],o=!0;else if(n(r))return r;return function(n){return"undefined"!=typeof n&&t.push(o?new e.Q._result(n):n),r.apply(r,t)}},e.Q.bound=function(e,n){var r=Array.prototype.slice.call(arguments,2);return n="function"==typeof n?n:e[n],function(t){return r.push(t),n.apply(e,r)}},e.Q.apply=function(e){var n=Array.prototype.slice.call(arguments,1);return function(r){return e="function"==typeof e?e:r[e],e.apply(r,n)}},e.Q.try=!0,e.Q.try=function(n,r){var t=new e.Deferred;setTimeout(function(){e.when(n).done(function(e){t.resolve(e)}).fail(function(){t.resolve(r)})},1);var o=t.promise();return o.or=function(e){return r=e,this},o},e.Q.not=function(n){var r=Array.prototype.slice.call(arguments,1);if("function"==typeof n)return function(){return r=r.concat(Array.prototype.slice.call(arguments)),e.Q.not(n.apply(this,r))};var t=new e.Deferred;return e.when(n).done(function(e){t.reject(e)}).fail(function(e){t.resolve(e)}),t.promise()},e.Q.anyOf=!0,e.Q.anyOf=function(n){n=n instanceof Array?n:Array.prototype.slice.call(arguments,0);var r;n.length&&n[n.length-1]instanceof e.Q._result&&(r=n.pop().result);var t=new e.Deferred,o=[];if(!n.length)throw new Error("$.Q.anyOf called with no parameters");return n.forEach(function(e){"function"==typeof e&&(e=e(r)),e.done(function(e){t.resolve(e)}).fail(function(e){o.push(e),o.length===n.length&&t.reject(o)})}),t.promise()},e.Q.someOf=function(n){n=n instanceof Array?n:Array.prototype.slice.call(arguments,0);var r;n.length&&n[n.length-1]instanceof e.Q._result&&(r=n.pop().result);var t=new Array(n.length),o=0,u=new e.Deferred,f=new Array(n.length),i=0;if(!n.length)throw new Error("$.Q.someOf called with no parameters");var l=function(){return u.notify({pct:100*++o/n.length,msg:"",results:t}),o>=n.length};return n.forEach(function(e,n){"function"==typeof e&&(e=e(r)),e.done(function(e){t[n]=e,l()&&u.resolve(t)}).fail(function(e){i++,f[n]=e,l()&&(i<t.length?u.resolve(t):u.reject(f))})}),u.promise()},e.Q.someFrom=function(n,r){var t=[],o=[],u=0,f=new e.Deferred,i=function(e){var n={};return o.forEach(function(r,t){n[r]=e[t]}),n};for(var l in n)o[u]=l,t[u]=n[l],u++;return r instanceof e.Q._result&&t.push(r),e.when(e.Q.someOf(t)).done(function(e){f.resolve(i(e))}).fail(function(e){f.reject(i(e))}).progress(function(e){f.notify(e)}),f.promise()},e.Q.allOf=function(n){n=n instanceof Array?n:Array.prototype.slice.call(arguments,0);var r;n.length&&n[n.length-1]instanceof e.Q._result&&(r=n.pop().result);var t=new Array(n.length),o=0,u=new e.Deferred;if(!n.length)throw new Error("$.Q.allOf called with no parameters");var f=function(){return u.notify({pct:100*++o/n.length,msg:"",results:t}),o>=n.length};return n.forEach(function(e,n){"function"==typeof e&&(e=e(r)),e.done(function(e){t[n]=e,f()&&u.resolve(t)}).fail(function(e){u.reject(e)})}),u.promise()},e.Q.pipe=function(){var n=Array.prototype.slice.call(arguments,0),r=0,t=new e.Deferred,o=function(e,n){return"function"==typeof e?e(n):e},u=function(e){t.reject(e)},f=function(){var i=Array.prototype.slice.call(arguments);return 1===i.length&&(i=i[0]),++r,t.notify({pct:parseInt(100*r/n.length),msg:r+"/"+n.length,done:r,total:n.length,result:i}),r>=n.length?(t.resolve(i),!0):void e.when(o(n[r],i)).done(f).fail(u)};return e.when(o(n[0])).done(f).fail(u),t.promise()},e.Q.wait=function(n,r){var t=new e.Deferred,o=t.promise();return r instanceof e.Q._result&&(r=r.result),o.id=setTimeout(function(){t.resolve(r)},n),o},e.Q.debug={success:function(n){return(new e.Deferred).resolve(n)},failure:function(n){return(new e.Deferred).reject(n)},pending:function(){return(new e.Deferred).promise()}},e.Q._result=function(e){this.result=e}}(jQuery);
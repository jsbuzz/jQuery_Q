/*! jQuery.Q.js - v1.1 - 2014-03-12
* https://github.com/jsbuzz/jQuery_Q
* Copyright (c) 2014 Matyas Buczko; Licensed GPL2 */
!function(e){function r(e){return(typeof e.done+typeof e.fail+typeof e.state).match(/(function){3}/)}e.Q=function(n){var t=Array.prototype.slice.call(arguments,1);if("string"==typeof n)n=e.Q[n];else if(r(n))return n;return function(){return n.apply(n,t)}},e.Q.bound=function(e,r){var n=Array.prototype.slice.call(arguments,2);return r="function"==typeof r?r:e[r],function(t){return n.push(t),r.apply(e,n)}},e.Q.use=function(r){var n=Array.prototype.slice.call(arguments,1);return"string"==typeof r&&(r=e.Q[r]),r.bind.apply(r,[r].concat(n))},e.Q.anyway=function(r,n){if("function"==typeof r)return function(){var t=Array.prototype.slice.call(arguments,0);return e.Q.anyway(r.apply(this,t),n)};var t=new e.Deferred;e.when(r).done(function(e){t.resolve(e)}).fail(function(){t.resolve(n)});var o=t.promise();return o.or=function(e){return n=e,this},o},e.Q.not=function(r){if("function"==typeof r)return function(){var n=Array.prototype.slice.call(arguments,0);return e.Q.not(r.apply(this,n))};var n=new e.Deferred;return e.when(r).done(function(e){n.reject(e)}).fail(function(e){n.resolve(e)}),n.promise()},e.Q.anyOf=function(r){r=r instanceof Array?r:Array.prototype.slice.call(arguments,0);var n=new e.Deferred,t=[];return r.forEach(function(e){"function"==typeof e&&(e=e()),e.done(function(e){n.resolve(e)}).fail(function(e){t.push(e),t.length===r.length&&n.reject(t)})}),n.promise()},e.Q.someOf=function(r){r=r instanceof Array?r:Array.prototype.slice.call(arguments,0);var n=[],t=[],o=0,f=new e.Deferred,i=[];return r.forEach(function(e,c){"function"==typeof e&&(e=e()),n[c]=!1,t[c]=void 0,e.done(function(e){n[c]=!0,t[c]=e;for(var i=0;i<n.length;i++)if(!n[i])return f.notify({pct:100*++o/r.length,msg:"",results:t}),!1;f.resolve(t)}).fail(function(e){n[c]=!0,i.push(e);for(var u=0;u<n.length;u++)if(!n[u])return f.notify({pct:100*++o/r.length,msg:"",results:t}),!1;i.length<t.length?f.resolve(t):f.reject(i)})}),f.promise()},e.Q.someFrom=function(r){var n=[],t=[],o=[],f=!1,i=0,c=new e.Deferred,u=0;for(var a in r)r.hasOwnProperty(a)&&(n[u]=r[a],o[u]=a,t[u]=!1,u++);return n.forEach(function(e,r){e.done(function(e){t[r]=!0,f||(f={}),f[o[r]]=e;for(var u=0;u<t.length;u++)if(!t[u])return c.notify({pct:100*++i/n.length,msg:"",results:f}),!1;c.resolve(f)}).fail(function(){t[r]=!0;for(var e=0;e<t.length;e++)if(!t[e])return c.notify({pct:100*++i/n.length,msg:"",results:f}),!1;f?c.resolve(f):c.reject()})}),c.promise()},e.Q.wait=function(r,n){var t=new e.Deferred;return setTimeout(function(){t.resolve(n)},r),t.promise()},e.Q.pipe=function(){var r=Array.prototype.slice.call(arguments,0),n=0,t=new e.Deferred,o=function(e,r){return"function"==typeof e?e(r):e},f=function(e){t.reject(e)},i=function(c){return++n,n>=r.length?(t.resolve(c),!0):(e.when(o(r[n],c)).done(i).fail(f),void t.notify({pct:100*n/r.length,msg:"",result:c}))};return e.when(o(r[0])).done(i).fail(f),t.promise()},e.Q.defer=function(r){var n=Array.prototype.slice.call(arguments,1),t=new e.Deferred,o=500,f=r;if(!n.length&&"object"==typeof r){var i=r;n=i.params||[],o=i.timeout||o,f=i.scope||i,r=i.fn}if(!(r.length>n.length))throw new Error("No success callback for method?");if(n.push(function(e){t.resolve(e)}),r.length>n.length?n.push(function(e){t.reject(e)}):setTimeout(function(){t.reject("timeout")},o),r.length>n.length)throw new Error("Invalid argument list");try{r.apply(f,n)}catch(c){t.reject(c)}return t.promise()},e.Q.deferObject=function(r,n,t){var o=new e.Deferred,f="onprogress";n=n||"onload onloadend",t=t||"onerror onabort",n.split(" ").forEach(function(e){r[e]=function(e){o.resolve(e)}}),t.split(" ").forEach(function(e){r[e]=function(e){o.reject(e)}}),f.split(" ").forEach(function(e){r[e]=function(e){o.progress(e)}});var i=o.promise();return i.target=r,i.do=function(e){try{for(var n in e)e.hasOwnProperty(n)&&r[n].apply(r,e[n])}catch(t){o.reject(t)}return i},i.set=function(e){try{for(var n in e)e.hasOwnProperty(n)&&(r[n]=e[n])}catch(t){o.reject(t)}return i},i},e.Q.parallel=function(r){return r=r instanceof Array?r:Array.prototype.slice.call(arguments,0),e.when.apply(e,r)},e.Q.debug={success:function(r){return(new e.Deferred).resolve(r)},failure:function(r){return(new e.Deferred).reject(r)}}}(jQuery);